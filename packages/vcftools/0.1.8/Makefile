include ../../../mk/gnu.pre.mk

DISTNAME=	vcftools
VERSION=	0.1.8
CATEGORIES=	bio
HOMEPAGE=	http://sourceforge.net/projects/vcftools
MASTER_SITES=	http://heanet.dl.sourceforge.net/project/vcftools/
MAINTAINER=	jtang@tchpc.tcd.ie
HAS_CONFIGURE=	no
DISTFILES = 	vcftools_$(VERSION).tar.gz

EXTRAVERSION=

PKGSUBDIR=	vcftools_$(VERSION)

DESCRIPTION=	"VCFtools - a program package designed for working with VCF files, such as those generated by the 1000 Genomes Project."

do-build:
	$(MODULE_ADD) $(BUILD_DEPENDS);   \
	cd $(WRKSRC)	;\
	cd cpp && $(MAKE)

BIN = compare-vcf fill-aa fill-rsIDs vcf-annotate merge-vcf vcf-isec vcf-stats vcf-to-tab fill-an-ac \
    query-vcf vcf-convert vcf-subset vcf-validator vcf-concat vcf-sort
MOD = FaSlice.pm Vcf.pm

MODULEFILE_LINES+=      PERL5LIB
MODULEFILE_CMD_PERL5LIB?= \
        $(ECHO) "prepend-path   PERL5LIB $(PROGRAM_PREFIX)/lib";

do-install:
	$(MODULE_ADD) $(BUILD_DEPENDS);   \
	cd $(WRKSRC) ;\
	$(INSTALL) -d $(PROGRAM_PREFIX)/bin ;\
	$(INSTALL) -d $(PROGRAM_PREFIX)/lib ;\
	$(INSTALL) cpp/vcftools $(PROGRAM_PREFIX)/bin ;\
	for i in $(BIN); do $(INSTALL) perl/$$i $(PROGRAM_PREFIX)/bin/$$i; done; \
	for i in $(MOD); do $(INSTALL) perl/$$i $(PROGRAM_PREFIX)/lib/$$i; done;


include ../../../mk/gnu.post.mk
